(function(){var e,t=[].slice;e=StyleBuilder.register("StyleBuilder.components.AssetEditor"),e["extends"]("StyleBuilder.View"),e.configuration({changeThrottle:1200}),e.privateMethods({beforeRender:function(){return this.$el.append(this.make("div",{"class":"asset-editor-wrapper"}))},afterRender:function(){var e,t=this;return e=this.$(".asset-editor-wrapper")[0],this.codeMirrorInstance=CodeMirror(e,{lineNumbers:!0,theme:this.theme||"lesser-dark",mode:this.mode}),this.changeHandler=_.debounce(function(e){return t.onEditorChange.call(t,e)},this.changeThrottle)},listenForChanges:function(){return this.codeMirrorInstance.on("change",this.changeHandler)},onEditorChange:function(e){var n,r,i,s=this;console.log("On Editor Change",arguments);if(!this.example)return;return i=this.assetName().split("."),n=i[0],r=2<=i.length?t.call(i,1):[],$.ajax({type:"POST",url:StyleBuilder.config.asset_compilation_url,data:JSON.stringify({name:n,extension:r.join("."),contents:this.getValue()}),success:function(e){if(e!=null?e.compiled:void 0)return s.trigger("example:recompiled",e.compiled,s.example)}})}}),e.publicMethods({assetName:function(){return this.example.read(""+this.role+"_asset_name")},loadExample:function(e){var t;return this.example=e,(t=this.codeMirrorInstance)!=null&&t.off("change",this.changeHandler),this.setValue(this.example.read(this.reader)),this.listenForChanges()},setValue:function(e){return this.codeMirrorInstance.setValue(e)},getValue:function(){return this.codeMirrorInstance.getValue()}}),e.register()}).call(this),function(){}.call(this);