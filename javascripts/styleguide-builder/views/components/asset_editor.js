(function(){var e,t=[].slice;e=StyleBuilder.register("StyleBuilder.components.AssetEditor"),e["extends"]("StyleBuilder.View"),e.configuration({changeThrottle:1200}),e.privateMethods({beforeRender:function(){return this.$el.append(this.make("div",{"class":"asset-editor-wrapper"}))},afterRender:function(){var e,t=this;return e=this.$(".asset-editor-wrapper")[0],this.codeMirrorInstance=CodeMirror(e,{lineNumbers:!0,theme:this.theme||"lesser-dark",mode:this.mode}),this.changeHandler=_.debounce(function(e){return t.onEditorChange.call(t,e)},this.changeThrottle)},listenForChanges:function(){return this.codeMirrorInstance.on("change",this.changeHandler)},onEditorChange:function(e){var n,r,i,s,o=this;console.log("On Editor Change",arguments);if(!this.example)return;return s=this.assetName().split("."),r=s[0],i=2<=s.length?t.call(s,1):[],n=i.join("."),$.ajax({type:"POST",url:CodeSync.get("assetCompilationEndpoint"),data:JSON.stringify({name:r,extension:n,contents:this.example.compilationPayload(this.getValue(),n)}),success:function(e){if(e!=null?e.compiled:void 0)return o.trigger("example:recompiled",e.compiled,o.example)}})}}),e.publicMethods({assetName:function(){return this.example.read(""+this.role+"_asset_name")},loadExample:function(e){var t;return this.example=e,(t=this.codeMirrorInstance)!=null&&t.off("change",this.changeHandler),this.setValue(this.example.read(this.reader)),this.listenForChanges()},setValue:function(e){return this.codeMirrorInstance.setValue(e)},getValue:function(){var e;return e=this.codeMirrorInstance.getValue()}}),e.register()}).call(this);